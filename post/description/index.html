<!DOCTYPE html>
<html lang="en_US">
<head>
    <meta charset="utf-8" />
    <title>Description Of Operating System | Aimen Malik</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <meta name="author" content="John Doe">
    <meta name="dc.copyright" content="Karl Mustermann">
    <meta name="description" content="This is only an example value for the meta description">
    <meta name="keywords" content="example, site, theme, tikva">

    
    <link href="css/bootswatch/solar.min.css" rel="stylesheet">
    
    <link href="css/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="css/custom.css" rel="stylesheet">



<script type="text/javascript">
    var azbalacSettingHeaderMoveTitle = 'false';
</script>
<script src="js/jquery-3.4.1.min.js"></script>
<script src="js/functions.js"></script><style>body {}.footer-container { background-color: #29281f; }.footer-container { color: #f9fcf9; }</style>



<link id="typography-header-title-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Exo%3A800"><style id="typography-title" type="text/css">#site-header-text a {
        font-family: Exo;
    }#site-header-text a {
        font-size: 50px; 
    }</style>

<link id="typography-header-subtitle-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Exo%3A600"><style id="typography-subtitle" type="text/css">#site-description {
        font-family: Exo;
    }#site-description {
        font-size: 30px; 
    }</style>

<style id="typography-body" type="text/css"></style>

<style id="typography-navbar" type="text/css">nav#navbarMain {
        font-size: 20px; 
    }
    nav#navbarMain ul.dropdown-menu {
        font-size: 20px;
    }</style>

<link id="typography-headline-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans"><style id="typography-headline" type="text/css">h1, h2, h3, h4, h5, h6 {
                font-family: Open Sans; 
            }</style>



    
    <script type="text/javascript">
        var azbalacSettingHeaderColor = { 'bg': '#000000',
            'transp': '0'
            };

    </script>
    <style type="text/css">
        #site-header-text a, #site-description {
                background: "#000000";  
            background:  rgba(0,0,0,0.00);
            
        }
    </style>
    
    
    <style type="text/css">
        #site-header-box-title {
            margin-bottom: 0px;
        }
    </style>
    
    
    <style type="text/css">
        #site-header-container-overlay {
        
            left: 20px;
        
        
            top: 20px;
        
        }
    </style>
    


<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
        <script src="//cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
        <script src="//cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->


</head>


<body>

<div id="header" role="banner" style="">

    <div class="container">
        <header class="masthead">
            <div>
                <div id="site-header-container-above" class="row align-items-center">
                    
                </div>
            </div>


            

            <div id="site-header-above"><a href="" rel="home">
                <picture>
                        <source media="(min-width: 1200px)" srcset="photo1.jpg 1110w">
                        <source media="(min-width: 992px) and (max-width: 1199.98px)" srcset="photo1.jpg 930w">
                        <source media="(min-width: 768px) and (max-width: 991.98px)" srcset="photo1.jpg 690w">
                        <source media="(min-width: 576px) and (max-width: 767.98px)" srcset="photo1.jpg 510w">
                        <source media="(max-width: 575.98px)" srcset="photo1.jpg 476w">
                        <img id="site-header-image" src="photo1.jpg" style="max-width: 100%; width: 100%">
                </picture>
                </a>

                <div id="site-header-container-overlay" class="position-absolute  fixed-top ">
                    <div id="site-header-box-title" class=" d-flex justify-content-start ">
                        <h1 class="azbalac-title" id="site-header-text"><a class="header-url" style="color: #073642;" href="">Aimen Malik</a></h1>
                    </div>
                    
                    <div id="site-header-box-subtitle" class=" d-flex justify-content-start ">   
                        <h2 class="azbalac-subtitle" id="site-description" style="color: #333333;">CMS ID :299395</h2>
                    </div>
                </div>
                
             
            </div>

    
    <nav id="navbarMain" class="navbar navbar-expand-sm justify-content-between mb-3 navbar-dark bg-primary" role="navigation">
        
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
        </button>
      
            
            <div class="sticky-top navbar-collapse collapse  " id="navbarSupportedContent"> 
                <ul class="navbar-nav">

  
  <li class="nav-item ">
    <a class="nav-link" href="/">
      
      Home
    </a>
  </li>
  <span class="mx-2"></span>
  
</ul>
             
            </div>
        
            
    </nav> 
    



      </header>
    </div> 
</div>


    <div id="main">
        <div class="container">
            <div class="row"><div class="col-md" id="content">





<h1>Description Of Operating System</h1>

    <div class="post-meta"><span class="byline-icon fa fa-clock-o" aria-hidden="true"></span> <span class="screen-reader-text">Date: </span><time datetime="2021-04-20T20:02:09&#43;05:00">20.04.2021</time> - 
     </div>


  <h1 id="introduction">Introduction:</h1>
<p>We are making an X86 compatilbe operating system which is multiboot compiled. It is written in C  language (Visual studio code) and in assembly language. We are creating a docker image.</p>
<ol>
<li>
<p><strong>buildenv:</strong>
Our image , which is based on the already made gcc image tools, is created in a docker file that contains all the sets we need to create our  build environment image. Docker simplies our process.
Nasm ( to compile assembly language) , group package to finally build to ozal , volume to developemnt environment to have access to all the files. <strong>docker build buildenv -t myos-buildenv</strong> this command to rum docker.</p>
</li>
<li>
<p><strong>src</strong>
Now we are inside the virtual linux machine. Source folder contains all the source code.</p>
<ul>
<li><strong>imp:</strong>
Implementation file to hold all implementation. We integrate it with multiboot boot folder is created.
<ul>
<li><strong>x86_64:</strong>
The x86_64 folder is the entry point into our operating system. The x86_64 folder contains the following c files:
<ul>
<li>print.c(function to build nust logo is here.)</li>
<li>main.c (contains all the main files)</li>
<li><strong>boot:</strong><br>
Boot located the operating system where ever in hardware or unversal drive it is.The boot folder contains the following <strong>assembly language</strong> files with .asm extension:
<ul>
<li>main64.asm</li>
<li>main.asm   ( This will be entry point in our operating system. Entry point is made global so we can access it when we are linking. The statement to be appreared on the qemu console is written here.)</li>
<li>header.asm (Two labels header start and header end is used. Length of the header is checked. )</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>targets:</strong> Here we will hold all the files needed for building x86.</p>
<ul>
<li><strong>x86_64:</strong>
<ul>
<li>linker.ld:  we need to tell the entry point of our operating system by a command <strong>ENTRY(START)</strong>. In fisrt section multiboot header is created and in second section text is added.It describes how to   link our operating system together.</li>
<li>iso folder: To transfer operating system to usb the iso file will be looked for.
<ul>
<li><strong>boot:</strong>
<ul>
<li><strong>grub:</strong>
<ul>
<li>grub.cfg: (inside this folder kernel.bin is present.)</li>
</ul>
</li>
</ul>
</li>
<li>.gitignore</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Makefile:  commands to build the operatind system are wriiten here. it is a handy tool to organize all the build commands and make sure that all the files that are modified are build and hence is very fast.</p>
</li>
<li>
<p>src\interface
It will have a print.h file that provides us with the printing interface.</p>
</li>
<li>
<p>to enter build environment type Windows (CMD): <strong>docker run &ndash;rm -it -v &ldquo;%cd%&quot;:/root/env myos-buildenv</strong> in terminal</p>
</li>
<li>
<p>make build-x86_64 command to build kernel iso file.</p>
</li>
<li>
<p>exit out docker container.</p>
</li>
<li>
<p>to run on qemu type <strong>qemu-system-x86_64 -cdrom dist/x86_64/kernel.iso</strong> in terminal.</p>
</li>
</ol>
<h4 id="steps-to-build-an-64--operating-system">Steps to build an 64  operating system</h4>
<p>Steps to build an operationg system are as follows:</p>
<ul>
<li>
<ol>
<li>Stack build:
First set up a stack(region  in the computer memory). It controls the functions call data. as functions are recursively called so when the function is returned data is popped from the data. It is simple to set up the stack. than write the c code that handles all the manupulation code.</li>
</ol>
</li>
<li>
<p>Switch to 64-bit mode:</p>
</li>
</ul>
<p>we need to switch our cpu to long mode and for this we first need to check whether the cpu supprots long mode or not.</p>
<ul>
<li>
<p>CPU ID:
To do this we need to flip the ID bit of the flag register , the fliped bit indicates that the CPU supprts CPU ID. The flag data is stored in eac register and is also copied in ecx. When the bit is flied we compare it with the one stored in ecx. If both the bits are same we know that the bit is not fliped and the cpu is not compatible. ALL if this is done using stack to recover.</p>
</li>
<li>
<p>Multiboot:
Here the magic value is compared , one from the boot loader and the other from the eax register. If they are not same there is no multiboot .</p>
</li>
<li>
<p>Long Mode Support:
Run the cpuid instruction which will take eax as an argument, and store some value back into eax. If this value is <strong>greater</strong> than the value previously stored in eax, then the CPU supports extended processor information. And if the value stored in eax is <strong>lesser</strong> then the long mode is not supported.</p>
</li>
</ul>
<p>Paging is also checked before entering long mode.</p>
<ul>
<li>Page Tables: We have four types of page tables, namely L4, L3, L2, L1. Memory is reserved for each tables. Paging is done by maping physical address to virtual address. one nuber is entered in L4 which points to l3 and one nu,ber in L3 table which will point to L2 table.<br>
-Each entry is of 2MB and a total of 512 entries will make 1GB of physical memory.	.</li>
</ul>


                </div>
                    <aside class="col-md-3 tikva-sidebar">
  

    

    
        <div class="col">
            <div class="p-3 mb-3 bg-light rounded">
                <h4>Basics:</h4>
                <p> To develop an operating system one should have comand on both the high level and the low level languages.An operating system (OS) is software that manages computer hardware and system resources and provides the tools that applications need to operate. </p>
            </div>
        </div>
    
        <div class="col">
            <div class="p-3 mb-3 bg-light rounded">
                <h4>Softwares</h4>
                <p><p class="mb-0"></em><h5> Qemu </h5>To emulate the operating system instead of loading the operationg system in the operating sytem. <br> <h5> Docker </h5>Allows to build reproducable building environment. <h5>Visual studio code</h5></p></p>
            </div>
        </div>
    

</aside>
</div>
        </div>
    </div>

    
        <div class="footer-container" style="">
    <div class="container">
        <footer>

            <div class="row">
            
            

            </div>
        </footer>
    </div>
</div>
    
    
        
<div class="subfooter-container">

    <div class="container">
        <div class="footer">
            <div class="row wrapper padding">
                <div class="col-xs-12 col-md-12">

            
            
                  
                </div>
            </div>
        </div>
    </div>
</div>

    

    <div id="media-width-detection-element"></div>
<script src="js/popper.min.js"></script>
<script src="js/bootstrap.min.js"></script>


</body>
</html>